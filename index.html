<!DOCTYPE html>
<html>
<head>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>

<h2>ğŸ’Œ Ella</h2>

<button onclick="send('estoy feliz')">ğŸ˜Š Estoy feliz</button>
<button onclick="send('estoy triste')">ğŸ˜¢ Estoy triste</button>
<button onclick="send('estoy preocupada')">ğŸ˜Ÿ Estoy preocupada</button>
<button onclick="send('voy a dormir')">ğŸŒ™ Me voy a dormir</button>
<button onclick="send('pensÃ© en ti')">ğŸ’­ PensÃ© en ti</button>
<button onclick="send(' podemos hablar')">ğŸ’¬ Â¿Podemos hablar?</button>

<h3>Respuesta de Ã©l:</h3>
<p id="resp">---</p>

<h3>Estado de Ã©l:</h3>
<p id="estado">---</p>

<script>
const client = mqtt.connect("wss://test.mosquitto.org:8081");

client.on("connect", () => {
  client.subscribe("yo/respondo");
  client.subscribe("estado/yo");
});

client.on("message", (t, m) => {
  if (t === "yo/respondo") resp.innerText = m.toString();
  if (t === "estado/yo") estado.innerText = m.toString();
});

function send(msg) {
  client.publish("ella/envia", msg);
}
</script>

</body>
</html>
